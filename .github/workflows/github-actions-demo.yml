name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Setup
      run: |
        sudo apt update
        # sudo apt install -y libcurl4-openssl-dev
        ls
#        cd arduino/
#        ls
#
#        git clone --branch v1.5.0 https://github.com/bxparks/EpoxyDuino.git
#        mv EpoxyDuino/EpoxyDuino.mk EpoxyDuino/EpoxyDuino.mk.bak
#        # Use custom makefile
#        # TODO: add a parameter to omit libraries
#        cp AmbovisEpoxyDuino.mk EpoxyDuino/EpoxyDuino.mk
#        # cd EpoxyDuino/
#        # sed -i.bkp '188s/MODULE_SRCS_CPP += $(foreach module,$(EPOXY_MODULES),$(MODULE_EXPANSION_CPP))/MODULE_SRCS_CPP_T += $(foreach module,$(EPOXY_MODULES),$(MODULE_EXPANSION_CPP))/' EpoxyDuino.mk
#        # sed -i.bkp '189i \
#        # FILTER_OUT_CPP_PATTERN= $(foreach v,$(2),$(if $(findstring $(1),$(v)),,$(v)))\
#        # EXCLUDE_CPP_PATTERN_1 := /ambovis/src/TimerOne\
#        # MODULE_SRCS_CPP_TT = $(call FILTER_OUT_CPP_PATTERN,$(EXCLUDE_CPP_PATTERN_1),$(MODULE_SRCS_CPP_T))\
#        # EXCLUDE_CPP_PATTERN_2 := /ambovis/src/TimerTwo\
#        # MODULE_SRCS_CPP_TTT = $(call FILTER_OUT_CPP_PATTERN,$(EXCLUDE_CPP_PATTERN_2),$(MODULE_SRCS_CPP_TT))\
#        # EXCLUDE_CPP_PATTERN_3 := /ambovis/src/TimerThree\
#        # MODULE_SRCS_CPP = $(call FILTER_OUT_CPP_PATTERN,$(EXCLUDE_CPP_PATTERN_3),$(MODULE_SRCS_CPP_TTT))\
#        # $(info $$MODULE_SRCS_CPP is [${MODULE_SRCS_CPP}])\
#        # \
#        # ' EpoxyDuino.mk
#        cd EpoxyDuino/cores/epoxy
#        touch wiring_private.h
#        cp pins_arduino_avr.h pins_arduino.h
#
#        sed -i.bkp '65i #ifndef LSBFIRST' SPI.h
#        sed -i.bkp '66i #define LSBFIRST 0' SPI.h
#        sed -i.bkp '67i #endif' SPI.h
#        sed -i.bkp '68i #ifndef MSBFIRST' SPI.h
#        sed -i.bkp '69i #define MSBFIRST 1' SPI.h
#        sed -i.bkp '70i #endif' SPI.h
#
#        sed -i.bkp '71i typedef enum _BitOrder {' SPI.h
#        sed -i.bkp '72i SPI_BITORDER_MSBFIRST = MSBFIRST,' SPI.h
#        sed -i.bkp '73i SPI_BITORDER_LSBFIRST = LSBFIRST,' SPI.h
#        sed -i.bkp '74i } BitOrder;' SPI.h
#
#        cd ../../..
#
#        echo "clone Aunit"
#        git clone --depth 1 https://github.com/bxparks/AUnit
#        echo "clone liquid"
#        git clone --branch 1.0.7 --depth 1 https://github.com/arduino-libraries/LiquidCrystal.git
#        echo "clone adafruit set"
#        git clone --branch 2.3.0 https://github.com/adafruit/Adafruit_ADS1X15.git
#        git clone --branch 1.7.3 https://github.com/adafruit/Adafruit_BusIO.git
#        git clone --branch 1.10.9 https://github.com/adafruit/Adafruit-GFX-Library.git
#        git clone --branch 1.5.6 https://github.com/adafruit/Adafruit_ILI9341.git
#
#        cd Adafruit_BusIO/
#        sed -i.bak -e '31,32d' Adafruit_SPIDevice.h
#        cd ../
#
#        ls
#        cd ambovis/tests/unit-tests/
#        make runtests
        